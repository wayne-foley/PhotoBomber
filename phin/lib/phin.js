const http=require("http");const https=require("https");const url=require("url");module.exports=function(opts,cb){if(typeof(opts)!=="string"&&!opts.hasOwnProperty("url"))throw"Missing url option from options for request method.";if(!cb)throw"Missing callback for request method.";var addr;if(typeof(opts)==="string"){addr=url.parse(opts);var options={"hostname":addr.hostname,"port":(Number(addr.port)||(addr.protocol.toLowerCase()==="http:"?80:443)),"path":addr.path,"method":"GET","headers":{},"auth":null}}else{addr=url.parse(opts.url);var options={"hostname":addr.hostname,"port":(Number(opts.port)||Number(addr.port)||(addr.protocol.toLowerCase()==="http:"?80:443)),"path":addr.path,"method":(opts.method||"GET"),"headers":(opts.headers||{}),"auth":(opts.auth||addr.auth||null)}}var req;var resHandler=function(res){res.setEncoding("utf8");var resBody="";res.on("data",function(chunk){resBody+=chunk});res.on("end",function(){cb(null,resBody,res)})};switch(addr.protocol.toLowerCase()){case"http:":req=http.request(options,resHandler);break;case"https:":req=https.request(options,resHandler);break;default:cb("Invalid / unknown address protocol. (Expected HTTP or HTTPS.)",null,null);return}req.on("error",function(err){cb(err,null,null)});if(opts.hasOwnProperty("data")){if(typeof(opts.data)==="object"){req.write(JSON.stringify(opts.data))}else{req.write(opts.data.toString())}}req.end()};